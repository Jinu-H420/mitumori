# Claude Code で見積もりを使う

見積もり（曲げ加工）を **Claude Code** で使う方法。

---

## 仕様の読み込み（Claude Code 向け）

見積り計算の**仕様は Markdown にまとまっています**。見積もり・計算書の修正・データ変更を依頼する前に、次のファイルを読み込むこと。

- **見積り計算書_仕様まとめ.md**（このフォルダ内）  
  - 目的・画面構成・計算の流れ（材料費・切断費・曲げ工賃・穴あけ）・データ参照・上書き・運用メモを記載。

依頼例: 「**見積り計算書_仕様まとめ.md を読んでから**、〇〇して」

---

## いまの状態

- **Cursor**: チャットで「見積もり ハット曲げ PL1.6 展開570 L40 1個」と話すと、このスキルを読んで計算してくれる。
- **Claude Code**: 同じ BRAIN2 リポジトリを開いても、スキルがそのまま効くかは環境次第。**確実に動かす**には、**見積もり用 CLI スクリプト** を実行してもらう。

---

## やり方（Claude Code で）

1. **BRAIN2 を Claude Code で開く**（このリポジトリをフォルダで開く）。
2. チャットで、例えば次のように依頼する。

   - 「**見積もりして。ハット曲げ 板厚1.6 展開570 長さ40 1個**」
   - 「**曲げ見積もり。コの字 板厚2.3 展開139.2 長さ2000 3本**」
   - 「**PL6 ハット曲げ 展開396 長さ70 2個で、丸穴4つ入れて**」

3. Claude Code に **「`scripts/estimate_bending.py` を実行して結果を教えて」** と伝わるように書く。  
   または、こちらの **使い方の例** をそのまま貼る。

   ```
   python scripts/estimate_bending.py ハット曲げ 1.6 570 40
   python scripts/estimate_bending.py コの字曲げ 2.3 139.2 2000 --数量 3
   python scripts/estimate_bending.py ハット曲げ 6 396 70 --数量 2 --丸穴 4
   ```

4. Claude Code がターミナルで `estimate_bending.py` を実行し、出てきた **単価・合計（税抜/税込）** をそのまま見積もり結果として返してくれる。

---

## スクリプトの場所とデータ

- **スクリプト**: `scripts/estimate_bending.py`（BRAIN2 ルートからの相対パス）
- **データ**: `.claude/skills/bending-estimate/data/` の `prices.json`・`rates.json`・`hole_prices.json` を参照。  
  計算ロジックは Excel 計算書・スキルと同じ。

---

## まとめ

- **見積もりは Claude Code で「スクリプト実行」で使う**形になっている。
- Claude Code のチャットで「見積もり 〇〇」と書けば、**「estimate_bending.py をこういう引数で実行して」** と解釈してもらい、結果をもって見積もりとして完成させる、という流れにするといい。
